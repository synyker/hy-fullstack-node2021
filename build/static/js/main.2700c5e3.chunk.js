(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),u=t(3),a=t(2),o=t(4),i=t.n(o),s="/api/persons",l=function(){return i.a.get(s)},d=function(e){return i.a.post(s,e)},j=function(e){return i.a.put("".concat(s,"/").concat(e.id),e)},b=function(e){return i.a.delete("".concat(s,"/").concat(e))},f=t(0),h=function(e){var n=e.handler;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{onChange:n})]})},m=function(e){var n=e.nameChangeHandler,t=e.numberChangeHandler,c=e.submitHandler;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"add new"}),Object(f.jsxs)("form",{onSubmit:c,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{onChange:n}),"number: ",Object(f.jsx)("input",{onChange:t})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})]})},O=function(e){var n=e.persons,t=e.deleteHandler;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Numbers"}),n&&n.map((function(e){return Object(f.jsx)(p,{person:e,deleteHandler:t},e.name)}))]})},p=function(e){var n=e.person,t=e.deleteHandler;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("span",{children:[n.name," ",n.number]}),Object(f.jsx)("button",{onClick:t(n),children:"delete"})]})},x=function(e){var n=e.message,t=e.type;return null===n?null:Object(f.jsx)("div",{class:t,children:n})},v=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),o=Object(u.a)(r,2),i=o[0],s=o[1],p=Object(a.useState)(""),v=Object(u.a)(p,2),g=v[0],C=v[1],H=Object(a.useState)(""),w=Object(u.a)(H,2),S=w[0],y=w[1],T=Object(a.useState)(null),k=Object(u.a)(T,2),D=k[0],E=k[1],I=Object(a.useState)(null),J=Object(u.a)(I,2),L=J[0],A=J[1];Object(a.useEffect)((function(){console.log("effect"),l().then((function(e){c(e.data)}))}),[]),console.log("render",t.length);var B=0===S.length?t:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})),N=function(e){d(e).then((function(n){c(t.concat(n.data)),A("Added person ".concat(e.name)),setTimeout((function(){A(null)}),5e3)}))},P=function(e){j(e).then((function(n){c(t.map((function(t){return t.id!==e.id?t:n.data}))),A("Updated person ".concat(e.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(n){E("failed to update person ".concat(e.name)),setTimeout((function(){E(null)}),5e3)}))};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(x,{message:D,type:"error"}),Object(f.jsx)(x,{message:L,type:"success"}),Object(f.jsx)(h,{handler:function(e){y(e.target.value)}}),Object(f.jsx)(m,{nameChangeHandler:function(e){s(e.target.value)},numberChangeHandler:function(e){C(e.target.value)},submitHandler:function(e){e.preventDefault();var n=t.findIndex((function(e){return e.name===i}));if(n<0)N({name:i,number:g});else{var c=t[n],r=c.id,u=c.name;P({id:r,name:u,number:g})}}}),Object(f.jsx)(O,{persons:B,deleteHandler:function(e){return function(){console.log(e.id),b(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id}))),A("Deleted person ".concat(e.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(n){E("failed to delete person ".concat(e.name)),setTimeout((function(){E(null)}),5e3)}))}}})]})};t(38);r.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2700c5e3.chunk.js.map